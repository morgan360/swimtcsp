{% extends "_base.html" %}

{# Load template tags for user account and social account functionalities #}
{% load account socialaccount %}

{# Set the title of the web page in the head section #}
{% block head_title %}Login{% endblock %}
<style>
    .socialaccount_provider {
        display: inline-block; /* Make the links inline-block for better control over spacing */
        background-color: #e2e8f0; /* A light background color */
        color: #1d4ed8; /* Text color */
        padding: 0.5rem 1rem; /* Padding around the text */
        border-radius: 0.375rem; /* Rounded corners */
        text-decoration: none; /* Remove underline from links */
        font-weight: bold; /* Make the text bold */
    }

    .socialaccount_provider.google {
        background-color: #db4437; /* Google's brand color */
        color: white; /* White text for better contrast */
    }

    .socialaccount_provider.facebook {
        background-color: #4267B2; /* Facebook's brand color */
        color: white; /* White text for better contrast */
    }</style>
{# Define the main content block #}
{% block content %}
    {% if messages %}
        <div class="max-w-lg mx-auto mt-4">
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }} bg-blue-100 border-t-4 border-blue-500 rounded-b text-blue-900 px-4 py-3 shadow-md"
                     role="alert">
                    <div class="flex">
                        <div>
                            <p class="font-bold">{{ message }}</p>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% endif %}
    <div class="flex justify-center items-center min-h-screen">
        <div class="w-1/3 mt-6">
            <article class="prose lg:prose-xl">
                <h1 class="text-3xl text-center mb-6">Login</h1>
                {# Load the list of available social account providers #}
                {% get_providers as socialaccount_providers %}
                {% if socialaccount_providers %}
                    <p class="text-center mb-4">Please sign in with one of your existing third party accounts. Or, <a
                            href="{{ signup_url }}" class="text-blue-500">sign up</a> for an account and sign in below:
                    </p>
                    </article>
                    <div class="mb-4 ">
                        {# Display the list of social account providers #}

                        <p class="socialaccount_providers">
                            {% include "socialaccount/snippets/provider_list.html" with process="login" %}
                        </p>
                        <div class="text-center my-4 text-3xl text-pink-700">or</div>
                    </div>

                    {# Optionally include additional login options or information #}
                    {% include "socialaccount/snippets/login_extra.html" %}
                {% else %}
                    <p class="text-center mb-4">If you have not created an account yet, then please <a
                            href="{{ signup_url }}" class="text-blue-500">sign up</a> first.</p>
                {% endif %}

            {# Begin the login form #}
            <form class="login" method="POST" action="{% url 'account_login' %}">
                {% csrf_token %}
                <div class="mb-4">
                    {# Dynamically create form fields for the login form #}
                    {% for field in form %}
                        <label class="block text-gray-900 text-sm font-bold mb-2" for="{{ field.id_for_label }}">
                            {{ field.label }}
                        </label>
                        {% if field.id_for_label == "id_remember" %}
                            <!-- Special handling for "Remember Me" checkbox -->
                            <input class="form-checkbox h-4 w-4" id="id_remember" type="checkbox"
                                   name="{{ field.name }}">
                        {% else %}
                            <!-- Default input field rendering for other fields -->
                            <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-900 leading-tight focus:outline-none focus:shadow-outline"
                                   id="{{ field.id_for_label }}" type="{{ field.widget.input_type }}"
                                   name="{{ field.name }}" placeholder="{{ field.label }}">
                        {% endif %}
                        {% if field.errors %}
                            <p class="text-red-500 text-xs italic">{{ field.errors }}</p>
                        {% endif %}
                    {% endfor %}

                </div>
                {# Pass a redirect field value if available #}
                {% if redirect_field_value %}
                    <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}"/>
                {% endif %}

                {# Submit button for the form #}
                <button class="btn btn-primary w-1/3" type="submit">Sign In</button>
                <div class="mt-4 text-center">
                    <a href="{% url 'account_reset_password' %}" class="text-blue-500">Forgot Password?</a>
                </div>
            </form>
        </div>
    </div>
{% endblock %}
